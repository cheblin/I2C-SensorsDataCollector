This project has a demonstration purpose to show the advantage of using Ad Hoc protocol code generator.
In the beginning, the idea was to replace a manually written protocol of the [PowerProfiler project](https://github.com/pvvx/STM32INA2xxPowerProfiler) with AdHoc code.
later become clear to me that the project should be completely rethought and rewritten.

The main routings of the original project are located in [the main.c file](https://github.com/pvvx/STM32INA2xxPowerProfiler/blob/master/STM32F103/Main/main.c). I did not touch others files, just edit main.c content. And add 'adhoc' folder with AdHoc protocol generated source code. 

[**AdHoc**](https://github.com/cheblin/I2C-SensorsDataCollector/tree/master/AdHoc) folder contains only AdHoc protocol description content.  

[**AdHoc/src/org/company/PowerProfiler.java**](https://github.com/cheblin/I2C-SensorsDataCollector/blob/master/AdHoc/src/org/company/PowerProfiler.java) is the protocol descriptor itself
[**AdHoc/gen/**](https://github.com/cheblin/I2C-SensorsDataCollector/tree/master/AdHoc/gen) generated by protocol descriptor code  
[**AdHoc/RunAdHocAgent.ps1**](https://github.com/cheblin/I2C-SensorsDataCollector/blob/master/AdHoc/RunAdHocAgent.ps1) [multi-platform script](https://docs.microsoft.com/en-us/powershell/scripting/install/installing-powershell-core-on-linux?view=powershell-7) to run [AdHocAgent](https://github.com/cheblin/AdHocAgent) to upload protocol descriptor file and then receive and deploy generated code to the destination project.

[**STM32F103/Main/adhoc/**](https://github.com/cheblin/I2C-SensorsDataCollector/tree/master/STM32F103/Main/adhoc) deployed generated code

[**STM32F103/Main/main.c**](https://github.com/cheblin/I2C-SensorsDataCollector/blob/master/STM32F103/Main/main.c) rewritten main.c

Content of the generated [AdHoc/gen/InC/Device/Demo_.c](https://github.com/cheblin/I2C-SensorsDataCollector/blob/master/AdHoc/gen/InC/Device/Demo_.c) and [AdHoc/gen/InC/Device/Test_.c](https://github.com/cheblin/I2C-SensorsDataCollector/blob/master/AdHoc/gen/InC/Device/Test_.c) can helps to understand how to work with generated API


I replaced the original puzzling structures with a simple bytes buffer [`InstructionsPack`](https://github.com/cheblin/I2C-SensorsDataCollector/blob/master/AdHoc/src/org/company/PowerProfiler.java#L84) with, assembler like instructions. So microcontroller just read instructions and acting accordingly.
Instructions [algorithm description](https://github.com/cheblin/I2C-SensorsDataCollector/blob/master/AdHoc/src/org/company/PowerProfiler.java#L59) can be found in the protocol description file and its content, respectively, spreads into generated code
